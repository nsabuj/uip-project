<html>
	<head>
		<title></title>
              <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">  <!-- fontawesome icons -->
              
		<link rel="stylesheet" href="../css/style.css">
	</head>
	<body>

              <div class="headerContainer">
      <!-- <img src="../images/theflyingdutchman-logo.png" alt="logo" class="logo" /> -->
      <div class="flagContainer">
        
          <a id="en" class="switch-lang"href="#"><img class="manImg" src="../images/uk.png"/></a>
  
    
          <a href="#" id="de" class=" switch-lang"><img class="manImg" src="../images/sweden.png"/></a>
    
      </div>
    </div>
    <!-- End Header -->

		<section class="header"> <!-- section head starts -->



			<ul class="navbar">
				<li><a href="bartender-home.html" class="active change-lang" id="ln-home-menu">Home</a></li>
				<li><a href="history-page.html" class="change-lang" id="ln-history-menu" >History</a></li>
			<!--	<li><a href="bartender-page.html" class="change-lang" id="ln-inventory-menu">Inventory</a></li>  -->
				<li><a href="" class="logout change-lang menu-item-left" id="ln-logout-menu">Logout</a></li>
			</ul>



		</section>   <!--end of section head -->

		<section class="body">
              <div class="left">
              	  <div class="table" id="table1">
              	  	<div class="tab-panel">
              	  		<div class="panel-header">
              	  			 <span class="change-lang" id="ln-table1-text">Table 1 </span> 
                                            <a href=""class="table-toggle float-right" >
                                                 <span class="collapse-in"><i class="fa fa-angle-down fa-2x"></i></span>
                                                 <span class="collapse hide"><i class="fa fa-angle-up fa-2x"></i></span>
                                            </a>
              	  		</div>
                                 <div class="panel-body-wrapper hide">
                                   <div class="panel-body"  data-placeholder="Drop here">
                                    
                                   </div>
                                   </div>

              	  		<div class="panel-footer-wrapper hide">
              	  	    <div class="panel-footer">
              	  			<p> <span class="change-lang" id="ln-total-amount-text1">Total amount </span> <span class="amount">0</span>SEK</p>
              	  		</div>
              	  		</div>
              	  	</div>
              	  </div>
              	  <div class="table" id="table2">
              	  	<div class="tab-panel">
              	  		<div class="panel-header">
              	  			<span class="change-lang" id="ln-table2-text"> Table 2  </span>
                                            <a href=""class="table-toggle float-right" >
                                                 <span class="collapse-in"><i class="fa fa-angle-down fa-2x"></i></span>
                                                 <span class="collapse hide"><i class="fa fa-angle-up fa-2x"></i></span>
                                            </a>
              	  		</div>
                                   <div class="panel-body-wrapper hide">
              	  		<div class="panel-body"  data-placeholder="Drop here">
              	  			
              	  		</div>
                                   </div>
              	  		<div class="panel-footer-wrapper hide">
              	  	    <div class="panel-footer">
              	  			<p><span class="change-lang" id="ln-total-amount-text2">Total amount </span><span class="amount">0</span>SEK</p>
              	  		</div>
              	  		</div>
              	  	</div>
              	  </div>
              	  <div class="table" id="table3">
              	  	<div class="tab-panel">
              	  		<div class="panel-header">
              	  			  <span class="change-lang" id="ln-table3-text"> Table 3  </span>
                                            <a href=""class="table-toggle float-right" >
                                                 <span class="collapse-in"><i class="fa fa-angle-down fa-2x"></i></span>
                                                 <span class="collapse hide"><i class="fa fa-angle-up fa-2x"></i></span>
                                            </a>
              	  		</div>
                                   <div class="panel-body-wrapper hide">
              	  		<div class="panel-body"  data-placeholder="Drop here">
              	  			
              	  		</div>
                                   </div>
              	  		<div class="panel-footer-wrapper hide">
              	  	    <div class="panel-footer">
              	  			<p><span class="change-lang" id="ln-total-amount-text3">Total amount </span> <span class="amount">0</span>SEK</p>
              	  		</div>
              	  		</div>
              	  	</div>
              	  </div>
              </div>
              <div class="right">
              	 <ul class="menu">
				<li><a href="" class="menu-item change-lang" id="all"  >All</a></li>
				<li><a href="" class="menu-item change-lang" id="beers"  >Beer</a></li>
				<li><a href="" class="menu-item change-lang" id="spirits" >Spirits</a></li>
				<li><a href="" class="menu-item change-lang" id="wines" >Wine</a></li>
				
			</ul>
			  <div class="bar-menu">
			  	
			  </div>
                       <div class="footer">

                                          <div class="button-group">
                                                 <div class="left">
                                                 <div class="btn-checkout">
                                                          <select name="" >
                                                                 <option value="">Select an option</option>
                                                                 <option value="table1">Table1</option>
                                                                 <option value="table2">Table2</option>
                                                                 <option value="table3">Table3</option>
                                                                 <option value="all">All</option>
                                                          </select>
                                                        <button class="btn checkout"><i class="fa fa-credit-card"></i> 
                                                          <span class="change-lang" id="ln-checkout-text">Checkout</span></button>
                                                 </div>                             
                                                 </div>
                                                 <div class="right">
                                                        <div class="btn-undo">
                                                               <button class="btn undo"><i class="fa fa-times"></i> <span class="change-lang" id="ln-undo-text">Undo </span></button>
                                                        </div>
                                                     <div class="btn-redo">
                                                               <button class="btn redo"><i class="fa fa-window-restore"></i>
                                                               <span class="change-lang" id="ln-redo-text">Redo</span></button>
                                                        </div>

                                                 </div>

                                          </div>

                             </div>             

              </div>

		</section>


<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="../database/database.js"></script>
<script src="../database/newLoader.js"></script>
<script type="text/javascript" src="../js/language/languages.js"></script>
<script type="text/javascript" src="../js/language/changeLanguage.js"></script>
<script src="../js/custom.js"></script> 
<script>



      // Translate page according to default language and setup so that language changes on selection
      initInternationalizationCustom();

       $(function(){
                var loggedin = localStorage.getItem('loggedin');
                 if(!loggedin || loggedin==='false'){
           window.location.href = "bartender-login.html";
           
        }


        refreash();
       

                   $('.menu-item').click(function(e){
                      e.preventDefault();
                      var id=$(this).attr('id');
                      
                      $('.bar-menu').html('');
                      if(id=='spirits'){
                      var data=[];       
                      data=data.concat(BEVERAGES.spirits);
                      }else if(id=='beers'){
                       var data=[];
                       data=data.concat(BEVERAGES.beers);
                      }else if(id=='wines'){
                       var data=[];
                       data=data.concat(BEVERAGES.wines);
                      }else{
                       var data=[];
                       
                       data=data.concat(BEVERAGES.beers,BEVERAGES.wines,BEVERAGES.spirits);
                      }

                     changelist(data);



                   });


                                      /// show the list by default
         var defdata=[];
         defdata=defdata.concat(BEVERAGES.beers,BEVERAGES.wines,BEVERAGES.spirits);
         
        var list='';
        changelist(defdata);

// drag and drop ends






        // end default data listing



function changelist(data){

var list='';

 data.forEach(element => { 

 list += '<li class="draggable-item" id="'+element.nr+'">'+element.name+'('+element.priceinclvat+' SEK)</li>';
        } 
        );
              

    $('.bar-menu').html(list);

     $('.draggable-item').draggable({
    revert: "invalid",
    stack: ".draggable-item",
    helper: 'clone'
   });
   $('.panel-body').droppable({
    accept: ".draggable-item",
    drop: function (event, ui) {
        var droppable = $(this);
        var draggable = ui.draggable;
        // Move draggable into droppable
        draggable.clone().appendTo(droppable);

        draggable.css({top: '5px', left: '5px'});
        var ids=getAllItems(droppable);
        $(this).parents('.tab-panel').find('.amount').html(update_total(ids));
        var id=$(this).parents('.table').attr('id');
        localStorage.setItem(id, ids);
       
        updateRedoUndo(id,draggable.attr('id'));        
        

    }

  });
  }









 });

function updateRedoUndo(tablename,id){
        var actions=JSON.parse(localStorage.getItem('latestActions'));
       if(!actions){
         var actions=[];
       }

       actions.push([tablename,id]);

       localStorage.setItem('latestActions',JSON.stringify(actions));


}







</script>             
	</body>
</html>